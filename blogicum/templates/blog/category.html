{% extends "base.html" %}
{% block title %}Категория {{ category.title }}{% endblock %}
{% block content %}
  <h1>Категория: {{ category.title }}</h1>
  <p>{{ category.description }}</p>
  
  {% for post in page_obj %}
    <article class="mb-5">
      <h3>{{ post.title }}</h3>
      <p class="text-muted">
        {{ post.pub_date|date:"d E Y" }} | 
        Автор: <a href="{% url 'blog:profile' post.author.username %}">{{ post.author.username }}</a>
      </p>
      {% if post.image %}
        <img src="{{ post.image.url }}" class="img-fluid mb-3" alt="{{ post.title }}" style="max-height: 300px;">
      {% endif %}
      <p>{{ post.text|truncatewords:50 }}</p>
      <p class="text-muted">Комментариев: ({{ post.comment_count }})</p>
      <a href="{% url 'blog:post_detail' post.id %}" class="btn btn-primary">Читать далее</a>
    </article>
    {% if not forloop.last %}<hr>{% endif %}
  {% empty %}
    <p>В этой категории пока нет публикаций.</p>
  {% endfor %}
  
  {% include "includes/paginator.html" %}
{% endblock %}